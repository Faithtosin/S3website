on:
  workflow_dispatch:
    inputs:
      username:
        description: 'Username'     
        required: true
        default: 'warning'
      env:
        description: 'env' 
        required: true
        default: 'development'
env:
  custom: 'check for env'
    
name: Caller Workflow

jobs:
  build:
    name: Build-step
    env:
      JOB_ENV : ${{ env.custom }}
    runs-on: ubuntu-latest
    needs: call-workflow-passing-data
    if: github.actor == 'Faithtosin'
    environment: development

    steps:
    - name: Checkout
      uses: actions/checkout@v2
      with:
        repository: Faithtosin/honig
        ref: master
        token: ${{ secrets.TOKEN }}
    - name: check files
      run: ls -la

  call-workflow-passing-data:
    uses: Faithtosin/KinesisTool/.github/workflows/called-workflow.yml@master
    with:
      username: ${{ env.JOB_ENV }}
      env: ${{ github.event.inputs.env }}
   
